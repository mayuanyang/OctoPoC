<template>
  <div class="container">
    <h3>App Settings </h3>
    <button class="btn btn-primary" click.trigger="getSettings()" >Get Settings</button>
    <div class="row"   style="margin-bottom:10px; margin-top: 10px;">
      
      <div class="col-md-6">
        <h4>App Settings (Read Model 1)</h4>
        <table class="table table-bordered">
          <tr>
          <th>Key</th>
          <th>Value</th>
          <th>Time</th>
          </tr>
          <tr repeat.for="setting of settings.projectAppSettings">
            <td>${setting.key}</td>
            <td>${setting.value}</td>
            <td>${setting.recordTime}</td>
          </tr>
        </table>
      </div>
      <div class="col-md-6">
        <h4>App Settings Audit Trail (Read Model 2)</h4>
        <table class="table table-bordered">
          <tr>
          <th>Key</th>
          <th>Value</th>
          <th>Time</th>
          <th>Operation</th>
          </tr>
          <tr class="${setting.operation == 'UPDATE' ? 'warning' : '' }" repeat.for="setting of settings.auditableProjectAppSettings">
            <td>${setting.key}</td>
            <td>${setting.value}</td>
            <td>${setting.recordTime}</td>
            <td>${setting.operation}</td>
          </tr>
        </table>
      </div>
    </div>
    <div class="row"   style="margin-bottom:10px; margin-top: 10px;">
      <h4>App Settings Diff </h4>
        <table class="table table-bordered">
          <tr>
          <th>Key</th>
          <th>Original Value</th>
          <th>New Value</th>
          <th>Last Modified Date</th>
          </tr>
          <tr  repeat.for="setting of settings.difference">
            <td>${setting.key}</td>
            <td>${setting.originalValue}</td>
            <td ><span class="${setting.originalValue == setting.newValue ? '' : 'label-warning'}">${setting.newValue}</span></td>
            <td>${setting.recordTime}</td>
          </tr>
        </table>
    </div>
  </div>
</template>